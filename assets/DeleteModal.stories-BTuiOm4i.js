import{j as w,a as i,F as Q}from"./emotion-react-jsx-runtime.browser.esm-qTqNjzW1.js";import{f as S,V as v,n as Z,E as Le,Q as De,d as q,A as F,F as He,N as We,w as Pe,G as Qe}from"./index-BrRoXPrZ.js";import{r as y,R as ce}from"./index-Cgg4I6sN.js";import{c as I}from"./emotion-react.browser.esm-CQhUtbq3.js";import"./iframe-DOMl-MD0.js";import{z as Ye,A as Ke,B as Ge,C as Je,D as Xe,E as Ze,F as et}from"./index-Cux8MSo6.js";import{c as re,u as tt,Q as nt,e as rt,f as ot,g as st,h as Y,i as K,j as at,A as ee,H as te,k as it,l as ne,w as ct,m as lt,D as dt,n as ut,o as we,s as mt,p as ft,a as pt,d as gt,b as ht,W as yt}from"./WorkSpaceName-Vm91kj9n.js";import{e as bt}from"./file-B3y2T0jv.js";import{u as oe}from"./QueryClientProvider-DO0bUeUP.js";import{P as Se}from"./path-lCvVC4_C.js";import"./index-N4SbRJ0J.js";import{u as Dt}from"./useOutsideClick-D66fadYG.js";import{u as wt}from"./useOverlay-D93tRXaH.js";import"./jsx-runtime-mLlc1at_.js";import"./_commonjsHelpers-BAn6OLmv.js";import"../sb-preview/runtime.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2796f21a-93a6-482e-9282-fe6716c3c6fb",e._sentryDebugIdIdentifier="sentry-dbid-2796f21a-93a6-482e-9282-fe6716c3c6fb")}catch{}})();const St=e=>I({width:"32rem",marginTop:"2.4rem",cursor:"pointer",...e&&{"&:hover":{color:S.colors.gray_500}}}),Et=I({color:S.colors.gray_700,fontWeight:400}),kt=I({color:S.colors.gray_500,fontSize:"2rem"}),Tt=I({marginTop:"0.8rem",...S.text.body07,fontWeight:400}),H={START:"시작 기간이 입력되지 않았습니다.",END:"종료 기간이 입력되지 않았습니다.",OTHER:"유효한 기간이 아닙니다. 확인 후 다시 입력해주세요."},It=e=>e.length!==8?e:`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`,Ee=e=>{if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return!1;const[n,o,r]=e.split("-").map(Number),s=new Date(n,o-1,r),a=n>=1900;return s.getFullYear()===n&&s.getMonth()===o-1&&s.getDate()===r&&a},le=e=>{if(Ee(e)){const[t,n,o]=e.split("-").map(Number);return new Date(t,n-1,o)}return null},de=e=>e.replace(/\./g,"-"),Ct=(e="",t="",n,o,r)=>{const[s,a]=y.useState({startDate:e,endDate:t}),[c,u]=y.useState({isStartDateValid:!0,isEndDateValid:!0,isStartDateError:!1,isEndDateError:!1,errorMessage:""}),[l,f]=y.useState(!1),d=(g,E,M,h)=>{const b=E.replace(/\D/g,""),k=b.length<=8?It(b):b;a(p=>{const D={...p,[g]:k};return n(D.startDate),o(D.endDate),D});const T=b.length===8&&Ee(k);u(p=>({...p,[h?"isStartDateValid":"isEndDateValid"]:T})),b?k.length===10?!T||!M?(u(p=>({...p,[h?"isStartDateError":"isEndDateError"]:!0,errorMessage:H.OTHER})),f(!1),r(!1)):m(k,s.startDate,s.endDate,h):(u(p=>({...p,[h?"isStartDateError":"isEndDateError"]:!1,errorMessage:""})),f(!1),r(!1)):(u(p=>({...p,[h?"isStartDateError":"isEndDateError"]:!0,errorMessage:h?H.START:H.END})),f(!1),r(!1))},m=(g,E,M,h)=>{const b=le(h?g:E),k=le(h?M:g);if(b&&k){const T=b<=k;f(T),r(T),u(T?{isStartDateValid:!0,isEndDateValid:!0,isStartDateError:!1,isEndDateError:!1,errorMessage:""}:{isStartDateValid:!0,isEndDateValid:!0,isStartDateError:h,isEndDateError:!h,errorMessage:H.OTHER})}else f(!0),r(!0),u({isStartDateValid:!0,isEndDateValid:!0,isStartDateError:!1,isEndDateError:!1,errorMessage:""})};return{dates:s,validation:c,isDateRangeValid:l,handleChange:d}},ke=({startDate:e,endDate:t,onSetStartDate:n,onSetEndDate:o,onSetIsDateRangeValid:r})=>{const{dates:s,validation:a,handleChange:c}=Ct(e,t,l=>n(l),l=>o(l),r),u=l=>I`
    text-align: ${l.length===10?"center":"left"};
  `;return w(Q,{children:[w(v,{styles:{direction:"row",align:"center",gap:"1.2rem"},children:[i(Z,{placeholder:"YYYY-MM-DD",css:[{width:"10.3rem"},u(s.startDate)],value:s.startDate,onChange:l=>c("startDate",l.target.value,a.isEndDateValid,!0),maxLength:10,isError:a.isStartDateError}),i("p",{css:kt,children:"~"}),i(Z,{placeholder:"YYYY-MM-DD",css:[{width:"10.3rem"},u(s.endDate)],value:s.endDate,onChange:l=>c("endDate",l.target.value,a.isStartDateValid,!1),maxLength:10,isError:a.isEndDateError})]}),i("div",{css:{height:"1.6rem"},children:(a.isStartDateError||a.isEndDateError)&&i(Le,{isError:!0,css:Tt,children:a.errorMessage})})]})};ke.__docgenInfo={description:"",methods:[],displayName:"BlockDate",props:{startDate:{required:!0,tsType:{name:"string"},description:""},endDate:{required:!0,tsType:{name:"string"},description:""},onSetStartDate:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: string) => void",signature:{arguments:[{type:{name:"string"},name:"date"}],return:{name:"void"}}},description:""},onSetEndDate:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: string) => void",signature:{arguments:[{type:{name:"string"},name:"date"}],return:{name:"void"}}},description:""},onSetIsDateRangeValid:{required:!0,tsType:{name:"signature",type:"function",raw:"(isValid: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isValid"}],return:{name:"void"}}},description:""}}};const Rt=I({display:"flex",justifyContent:"center",alignItems:"center",width:"5rem",height:"5rem",borderRadius:"100%",border:`1.2px solid ${S.colors.gray_400}`,overflow:"hidden",cursor:"pointer","&:hover":{backgroundColor:S.colors.blue_100}}),xt=I({border:`1.6px solid ${S.colors.key_500}`,backgroundColor:S.colors.blue_100}),vt=I({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",gap:"1.2rem"}),Te=[{name:"MEETING",icon:i(Ye,{width:24,height:24,css:{flexShrink:0}})},{name:"ACCOUNTING",icon:i(Ke,{width:24,height:24,css:{flexShrink:0}})},{name:"TASK",icon:i(Ge,{width:24,height:24,css:{flexShrink:0}})},{name:"NOTICE",icon:i(Je,{width:24,height:24,css:{flexShrink:0}})},{name:"STUDY",icon:i(Xe,{width:24,height:24,css:{flexShrink:0}})},{name:"EVENT",icon:i(Ze,{width:24,height:24,css:{flexShrink:0}})}],Ie=({selectedBlockIcon:e,onBlockIconSelect:t})=>{const n=o=>{t(e===o?-1:o)};return i("div",{css:vt,children:Te.map((o,r)=>i("div",{css:[Rt,e===r&&xt],onClick:()=>n(r),children:o.icon},r))})};Ie.__docgenInfo={description:"",methods:[],displayName:"BlockIcon",props:{selectedBlockIcon:{required:!0,tsType:{name:"number"},description:""},onBlockIconSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}}};const P=({title:e,children:t})=>w(v,{tag:"div",styles:{direction:"column",align:"flex-start",gap:"1.2rem",width:"36.5rem"},children:[i(De,{tag:"H6",css:{fontWeight:500},children:e}),t]});P.__docgenInfo={description:"",methods:[],displayName:"BlockBox",props:{title:{required:!0,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const Ce=y.createContext(void 0),se=()=>{const e=y.useContext(Ce);if(!e)throw new Error("Error useBlockContext");return e},Re=({children:e})=>{const[t,n]=y.useState(1),[o,r]=y.useState({blockName:"",blockType:"",blockColor:"",startDate:"",endDate:""}),s=y.useCallback(()=>n(u=>u+1),[]),a=y.useCallback(()=>{n(1),r({blockName:"",blockType:"",blockColor:"",startDate:"",endDate:""})},[]),c=y.useCallback(u=>{r(l=>({...l,...u}))},[]);return i(Ce.Provider,{value:{step:t,formData:o,setFormData:c,nextStep:s,reset:a},children:e})};Re.__docgenInfo={description:"",methods:[],displayName:"BlockProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const xe=({isVisible:e})=>{const[t,n]=y.useState(-1),[o,r]=y.useState(!1),{formData:s,setFormData:a,nextStep:c}=se(),u=d=>{d.target.value.length<=25&&a({blockName:d.target.value})},l=s.blockName.trim()!==""&&t!==-1&&s.startDate.length===10&&s.endDate.length===10&&o,f=()=>{if(l){const d=Te[t].name;a({blockType:d,startDate:s.startDate,endDate:s.endDate}),c()}};return e?w(v,{tag:"section",styles:{direction:"column",justify:"space-between",align:"center",height:"55.11rem",gap:"2.4rem"},children:[i(re,{step:"block",title:"블록 생성하기",info:"타임라인에 생성할 블록 정보를 입력해주세요"}),w(v,{styles:{direction:"column",align:"center",gap:"2.4rem",paddingLeft:"6.8rem",paddingRight:"6.8rem"},children:[i(P,{title:"블록 아이콘",children:i(Ie,{selectedBlockIcon:t,onBlockIconSelect:n})}),i(P,{title:"블록명",children:w(v,{styles:{align:"flex-end",direction:"column",gap:"0.8rem",width:"100%"},children:[i(Z,{placeholder:"활동,행사명 등",css:{width:"100%"},value:s.blockName,onChange:u}),w(q,{tag:"body7",css:Et,children:[s.blockName.length," / 25"]})]})}),i(P,{title:"기간",children:i(v,{styles:{align:"flex-start",direction:"column",padding:"0",width:"100%"},children:i(ke,{startDate:s.startDate,endDate:s.endDate,onSetStartDate:d=>a({startDate:d}),onSetEndDate:d=>a({endDate:d}),onSetIsDateRangeValid:r})})})]}),i(F,{variant:"primary",size:"medium",css:St(l),disabled:!l,onClick:f,children:"다음"})]}):null};xe.__docgenInfo={description:"",methods:[],displayName:"BlockModal",props:{isVisible:{required:!0,tsType:{name:"boolean"},description:""}}};const Mt=I({borderRadius:"8px",border:`1px dashed ${S.colors.gray_400}`,color:S.colors.gray_500});I({color:S.colors.gray_500});const _t=I({padding:"0",width:"6.4rem",textDecoration:"underline",...S.text.body06,fontWeight:600,color:S.colors.gray_500});function ve(e,t){return tt({...e,enabled:!0,suspense:!0,throwOnError:rt,placeholderData:void 0},nt,t)}const Ot=({files:e,onFilesChange:t,setFileUrls:n,setUploadStatus:o})=>{const r=y.useRef(null),{mutateAsync:s}=ot(),a=y.useCallback(async f=>{if(!f)return;const m=Array.from(f).filter(M=>!e.some(h=>h.name===M.name&&h.size===M.size));t([...e,...m]);const g={},E={};for(let M=0;M<m.length;M++){const h=m[M],b=bt(h.name),k=await st(b),T=h.name;E[T]=!1,o(D=>({...D,...E}));const p=k==null?void 0:k.url;if(h&&p){const D=Date.now(),C=await s({presignedUrl:p,file:h}),x=Date.now()-D,A=Math.max(0,2e3-x);setTimeout(()=>{C&&(g[T]=C,E[T]=!0,o(B=>({...B,...E})),n(B=>({...B,...g})))},A)}}r.current&&(r.current.value="")},[e,t,s,n,o]),c=y.useCallback(f=>{a(f.target.files)},[a]),u=y.useCallback(f=>{f.preventDefault()},[]),l=y.useCallback(f=>{f.preventDefault(),a(f.dataTransfer.files)},[a]);return{fileInputRef:r,handleFileChange:c,handleDragOver:u,handleDrop:l}},Me=({files:e,onFilesChange:t,setFileUrls:n,setUploadStatus:o})=>{const{fileInputRef:r,handleFileChange:s,handleDragOver:a,handleDrop:c}=Ot({files:e,onFilesChange:t,setFileUrls:n,setUploadStatus:o});return i(v,{styles:{direction:"column",justify:"center",align:"center",padding:"3.2rem 6.35rem",width:"100%"},css:Mt,onDragOver:a,onDrop:u=>c(u),children:w(v,{tag:"form",styles:{direction:"column",align:"center",justify:"center"},children:[i("input",{type:"file",multiple:!0,style:{display:"none"},ref:r,onChange:s}),i(q,{tag:"body6",children:"업로드할 파일을 여기로 드래그 하세요"}),w(v,{styles:{direction:"row",align:"center",justify:"center",gap:"0.3rem"},css:{marginTop:"1.6rem",whiteSpace:"nowrap"},children:[i(q,{tag:"body6",children:"또는"}),i(F,{variant:"text",css:_t,onClick:()=>{var u;return(u=r.current)==null?void 0:u.click()},children:"여기를 클릭"}),i(q,{tag:"body6",children:"하여"})]}),i(q,{tag:"body6",css:{marginTop:"0.5rem"},children:"업로드할 파일을 선택하세요"})]})})};Me.__docgenInfo={description:"",methods:[],displayName:"BlockAdd",props:{files:{required:!0,tsType:{name:"Array",elements:[{name:"File"}],raw:"File[]"},description:""},onFilesChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: File[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"File"}],raw:"File[]"},name:"files"}],return:{name:"void"}}},description:""},setFileUrls:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Files"}],raw:"SetStateAction<Files>"}],raw:"Dispatch<SetStateAction<Files>>"},description:""},setUploadStatus:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"signature",type:"object",raw:"{ [key: string]: boolean }",signature:{properties:[{key:{name:"string"},value:{name:"boolean",required:!0}}]}}],raw:"SetStateAction<{ [key: string]: boolean }>"}],raw:"Dispatch<SetStateAction<{ [key: string]: boolean }>>"},description:""}}};const At=I({borderRadius:"8px",border:`1px solid ${S.colors.gray_300}`,width:"37.5rem"}),Nt=I({color:S.colors.gray_800,fontWeight:500,maxWidth:"30rem"}),_e=({title:e,onDelete:t,isUploading:n})=>w(v,{styles:{direction:"row",align:"center",justify:"space-between",padding:"1.5rem 1.2rem"},css:At,children:[i(q,{tag:"body6",css:Nt,children:e}),n?i(He,{size:20}):i(et,{width:20,height:20,css:{cursor:"pointer"},onClick:t})]});_e.__docgenInfo={description:"",methods:[],displayName:"BlockItem",props:{title:{required:!0,tsType:{name:"string"},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isUploading:{required:!0,tsType:{name:"boolean"},description:""}}};const jt=I({display:"flex",flexDirection:"column",maxHeight:"18rem",width:"38.5rem",gap:"0.8rem",position:"relative",paddingRight:"1rem",overflowY:"auto",boxSizing:"content-box","&::-webkit-scrollbar":{width:"1rem"},"&::-webkit-scrollbar-thumb":{backgroundColor:S.colors.gray_300,borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"}}),qt=I({flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"55.11rem",paddingLeft:"6.8rem",paddingRight:"6.8rem",gap:"2.4rem"}),Ft=async(e,t,n)=>(await Y.post(`/time-blocks/team/${e}/time-block`,n,{params:{type:t}})).data,Bt=async(e,t)=>await Y.delete(`/time-blocks/team/${e}/time-block/${t}`),$t=(e,t)=>{const n=oe();return K({mutationFn:o=>Ft(e,t,o),onSuccess:()=>{n.invalidateQueries({queryKey:["timeBlock"]})}})},ue=["#FFE6E8","#F8E2CB","#C4F2E5","#DCD8FA","#E2E8F8","#F8E1F5","#D3EFFA"],Ut=()=>{const e=Math.floor(Math.random()*ue.length);return ue[e]},zt=/\{[^{}]+\}/g,Vt=()=>{var e,t;return typeof process=="object"&&Number.parseInt((t=(e=process==null?void 0:process.versions)==null?void 0:e.node)==null?void 0:t.substring(0,2))>=18&&process.versions.undici};function Lt(){return Math.random().toString(36).slice(2,11)}function Oe(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:o=globalThis.fetch,querySerializer:r,bodySerializer:s,headers:a,requestInitExt:c=void 0,...u}={...e};c=Vt()?c:void 0,t=fe(t);const l=[];async function f(d,m){const{baseUrl:g,fetch:E=o,Request:M=n,headers:h,params:b={},parseAs:k="json",querySerializer:T,bodySerializer:p=s??Wt,body:D,...C}=m||{};g&&(t=fe(g));let x=typeof r=="function"?r:me(r);T&&(x=typeof T=="function"?T:me({...typeof r=="object"?r:{},...T}));const A=D===void 0?void 0:p(D),B=A===void 0||A instanceof FormData?{}:{"Content-Type":"application/json"},Ve={redirect:"follow",...u,...C,body:A,headers:Qt(B,a,h,b.header)};let z,V,N=new n(Pt(d,{baseUrl:t,params:b,querySerializer:x}),Ve);for(const _ in C)_ in N||(N[_]=C[_]);if(l.length){z=Lt(),V=Object.freeze({baseUrl:t,fetch:E,parseAs:k,querySerializer:x,bodySerializer:p});for(const _ of l)if(_&&typeof _=="object"&&typeof _.onRequest=="function"){const O=await _.onRequest({request:N,schemaPath:d,params:b,options:V,id:z});if(O){if(!(O instanceof n))throw new Error("onRequest: must return new Request() when modifying the request");N=O}}}let R;try{R=await E(N,c)}catch(_){let O=_;if(l.length)for(let j=l.length-1;j>=0;j--){const L=l[j];if(L&&typeof L=="object"&&typeof L.onError=="function"){const $=await L.onError({request:N,error:O,schemaPath:d,params:b,options:V,id:z});if($){if($ instanceof Response){O=void 0,R=$;break}if($ instanceof Error){O=$;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(O)throw O}if(l.length)for(let _=l.length-1;_>=0;_--){const O=l[_];if(O&&typeof O=="object"&&typeof O.onResponse=="function"){const j=await O.onResponse({request:N,response:R,schemaPath:d,params:b,options:V,id:z});if(j){if(!(j instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");R=j}}}if(R.status===204||R.headers.get("Content-Length")==="0")return R.ok?{data:void 0,response:R}:{error:void 0,response:R};if(R.ok)return k==="stream"?{data:R.body,response:R}:{data:await R[k](),response:R};let X=await R.text();try{X=JSON.parse(X)}catch{}return{error:X,response:R}}return{GET(d,m){return f(d,{...m,method:"GET"})},PUT(d,m){return f(d,{...m,method:"PUT"})},POST(d,m){return f(d,{...m,method:"POST"})},DELETE(d,m){return f(d,{...m,method:"DELETE"})},OPTIONS(d,m){return f(d,{...m,method:"OPTIONS"})},HEAD(d,m){return f(d,{...m,method:"HEAD"})},PATCH(d,m){return f(d,{...m,method:"PATCH"})},TRACE(d,m){return f(d,{...m,method:"TRACE"})},use(...d){for(const m of d)if(m){if(typeof m!="object"||!("onRequest"in m||"onResponse"in m||"onError"in m))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");l.push(m)}},eject(...d){for(const m of d){const g=l.indexOf(m);g!==-1&&l.splice(g,1)}}}}function G(e,t,n){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${(n==null?void 0:n.allowReserved)===!0?t:encodeURIComponent(t)}`}function Ae(e,t,n){if(!t||typeof t!="object")return"";const o=[],r={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const c in t)o.push(c,n.allowReserved===!0?t[c]:encodeURIComponent(t[c]));const a=o.join(",");switch(n.style){case"form":return`${e}=${a}`;case"label":return`.${a}`;case"matrix":return`;${e}=${a}`;default:return a}}for(const a in t){const c=n.style==="deepObject"?`${e}[${a}]`:a;o.push(G(c,t[a],n))}const s=o.join(r);return n.style==="label"||n.style==="matrix"?`${r}${s}`:s}function Ne(e,t,n){if(!Array.isArray(t))return"";if(n.explode===!1){const s={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",a=(n.allowReserved===!0?t:t.map(c=>encodeURIComponent(c))).join(s);switch(n.style){case"simple":return a;case"label":return`.${a}`;case"matrix":return`;${e}=${a}`;default:return`${e}=${a}`}}const o={simple:",",label:".",matrix:";"}[n.style]||"&",r=[];for(const s of t)n.style==="simple"||n.style==="label"?r.push(n.allowReserved===!0?s:encodeURIComponent(s)):r.push(G(e,s,n));return n.style==="label"||n.style==="matrix"?`${o}${r.join(o)}`:r.join(o)}function me(e){return function(n){const o=[];if(n&&typeof n=="object")for(const r in n){const s=n[r];if(s!=null){if(Array.isArray(s)){if(s.length===0)continue;o.push(Ne(r,s,{style:"form",explode:!0,...e==null?void 0:e.array,allowReserved:(e==null?void 0:e.allowReserved)||!1}));continue}if(typeof s=="object"){o.push(Ae(r,s,{style:"deepObject",explode:!0,...e==null?void 0:e.object,allowReserved:(e==null?void 0:e.allowReserved)||!1}));continue}o.push(G(r,s,e))}}return o.join("&")}}function Ht(e,t){let n=e;for(const o of e.match(zt)??[]){let r=o.substring(1,o.length-1),s=!1,a="simple";if(r.endsWith("*")&&(s=!0,r=r.substring(0,r.length-1)),r.startsWith(".")?(a="label",r=r.substring(1)):r.startsWith(";")&&(a="matrix",r=r.substring(1)),!t||t[r]===void 0||t[r]===null)continue;const c=t[r];if(Array.isArray(c)){n=n.replace(o,Ne(r,c,{style:a,explode:s}));continue}if(typeof c=="object"){n=n.replace(o,Ae(r,c,{style:a,explode:s}));continue}if(a==="matrix"){n=n.replace(o,`;${G(r,c)}`);continue}n=n.replace(o,a==="label"?`.${encodeURIComponent(c)}`:encodeURIComponent(c))}return n}function Wt(e){return e instanceof FormData?e:JSON.stringify(e)}function Pt(e,t){var r;let n=`${t.baseUrl}${e}`;(r=t.params)!=null&&r.path&&(n=Ht(n,t.params.path));let o=t.querySerializer(t.params.query??{});return o.startsWith("?")&&(o=o.substring(1)),o&&(n+=`?${o}`),n}function Qt(...e){const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const o=n instanceof Headers?n.entries():Object.entries(n);for(const[r,s]of o)if(s===null)t.delete(r);else if(Array.isArray(s))for(const a of s)t.append(r,a);else s!==void 0&&t.set(r,s)}return t}function fe(e){return e.endsWith("/")?e.substring(0,e.length-1):e}function Yt(e){const t=async({queryKey:[o,r,s],signal:a})=>{const c=o.toUpperCase(),u=e[c],{data:l,error:f}=await u(r,{signal:a,...s});if(f)throw f;return l},n=(o,r,...[s,a])=>({queryKey:[o,r,s],queryFn:t,...a});return{queryOptions:n,useQuery:(o,r,...[s,a,c])=>at(n(o,r,s,a),c),useSuspenseQuery:(o,r,...[s,a,c])=>ve(n(o,r,s,a),c),useMutation:(o,r,s,a)=>K({mutationKey:[o,r],mutationFn:async c=>{const u=o.toUpperCase(),l=e[u],{data:f,error:d}=await l(r,c);if(d)throw d;return f},...s},a)}}const Kt={async onRequest({request:e}){const t=localStorage.getItem(ee);if(!t)throw window.location.replace(Se.LOGIN),new Error("토큰이 존재하지 않습니다.");return e.headers.set("Authorization",`Bearer ${t}`),e}},Gt={async onError({error:e,request:t}){const n=e,o=n.config;if(!n.response||!o)throw new Error("에러가 발생했습니다.");const{status:r}=n.response;if(r===te.UNAUTHORIZED)try{const{data:s}=await it();localStorage.setItem(ee,s.accessToken);const a={...Object.fromEntries(t.headers.entries()),Authorization:`Bearer ${s.accessToken}`},c=new Request(t,{headers:a}),u=await fetch(c);if(!u.ok)throw new ne(u.status);return u}catch{throw localStorage.removeItem(ee),window.location.replace(Se.LOGIN),new Error("토큰 갱신에 실패하였습니다.")}return Promise.reject(n)}},Jt={async onError({error:e}){const t=e;if(!t.response)throw t;ct(r=>{r.setLevel("error"),r.captureMessage(`[API Error] ${window.location.href}`)});const{data:n,status:o}=t.response;throw o>=te.INTERNAL_SERVER_ERROR?new ne(te.INTERNAL_SERVER_ERROR,n.message):new ne(o,n.message)}},je="undefined",J=Oe({baseUrl:je,credentials:"include",headers:{"Content-Type":"application/json"}});Oe({baseUrl:je,credentials:"include",headers:{"Content-Type":"application/json"}});const Xt=Yt(J);J.use(Gt);J.use(Kt);J.use(Jt);const pe=e=>{let t;const n=new Set,o=(l,f)=>{const d=typeof l=="function"?l(t):l;if(!Object.is(d,t)){const m=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(g=>g(t,m))}},r=()=>t,c={setState:o,getState:r,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l))},u=t=e(o,r,c);return c},Zt=e=>e?pe(e):pe,en=e=>e;function tn(e,t=en){const n=ce.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return ce.useDebugValue(n),n}const ge=e=>{const t=Zt(e),n=o=>tn(t,o);return Object.assign(n,t),n},qe=e=>e?ge(e):ge,nn=qe(e=>({teamId:Number(localStorage.getItem("teamId")),actions:{setTeamId:t=>e({teamId:t})}})),rn=()=>nn(e=>e.actions),on=()=>{var o,r;const{setTeamId:e}=rn(),{data:t,isSuccess:n}=Xt.useQuery("get","/api/v1/teams",{select:s=>s.data});if(n&&!localStorage.getItem("teamId")){const s=(((o=t==null?void 0:t.data)==null?void 0:o.teams)&&((r=t==null?void 0:t.data.teams[0])==null?void 0:r.teamId))??0;return localStorage.setItem("teamId",s.toString()),e(s),s}return Number(localStorage.getItem("teamId"))},U=qe(e=>({isOpen:!1,contentType:null,modalData:null,actions:{openModal:(t,n=null)=>{e({isOpen:!0,contentType:t,modalData:n})},closeModal:()=>e({isOpen:!1,contentType:null,modalData:null})}})),sn=()=>U(e=>e.isOpen),an=()=>U(e=>e.contentType),cn=()=>U(e=>e.modalData),ln=()=>U(t=>t.actions.openModal),ae=()=>U(t=>t.actions.closeModal),Fe=({isVisible:e})=>{const t=on(),{formData:n,reset:o}=se(),r=ae(),[s,a]=y.useState([]),[c,u]=y.useState({}),[l,f]=y.useState({}),[d,m]=y.useState(!0),{mutate:g}=$t(t,"executive"),{mutate:E}=lt(),{createToast:M}=We();y.useEffect(()=>{const p=s.length===0||s.length>0&&Object.values(l).every(D=>D);m(p)},[l,s.length]);const h=p=>{a(D=>{const C=p.filter(x=>!D.some(A=>A.name===x.name&&A.size===x.size));return[...D,...C]}),m(!1)},b=p=>{const D=s.find(C=>C.name===p);D&&E({fileName:D.name},{onSuccess:()=>{a(C=>C.filter(A=>A.name!==p)),u(C=>{const x={...C};return delete x[p],x}),f(C=>{const x={...C};return delete x[p],x})}})};if(!e)return null;const k={name:n.blockName,color:Ut(),startDate:de(n.startDate),endDate:de(n.endDate),blockType:n.blockType,files:c},T=()=>{g(k,{onSuccess:()=>{M("활동 블록이 생성되었습니다","success"),r(),o()}})};return w(v,{tag:"section",css:qt,children:[i(re,{step:"upload",title:"블록 생성하기",info:"해당 블록에 업로드할 문서를 선택해주세요"}),w(v,{styles:{direction:"column",align:"flex-start",grow:"1",width:"100%",gap:"2.4rem"},children:[i(Me,{files:s,onFilesChange:h,setFileUrls:u,setUploadStatus:f}),i("div",{className:"scroll",css:jt,children:s.map(p=>i(_e,{title:p.name,onDelete:()=>b(p.name),isUploading:!l[p.name]},p.name))})]}),i(F,{variant:"primary",size:"medium",css:{width:"32rem"},onClick:T,disabled:!d,children:"저장"})]})};Fe.__docgenInfo={description:"",methods:[],displayName:"UploadModal",props:{isVisible:{required:!0,tsType:{name:"boolean"},description:""}}};const Be=()=>{const{step:e}=se();return w(Q,{children:[i(xe,{isVisible:e===1}),i(Fe,{isVisible:e===2})]})};Be.__docgenInfo={description:"",methods:[],displayName:"BlockFlow"};const dn=()=>{const e=oe();return K({mutationFn:({teamId:n,blockId:o})=>Bt(n,o),onSuccess:()=>{e.invalidateQueries({queryKey:["timeBlock"]}),e.invalidateQueries({queryKey:["document"]})}})},un=async(e,t)=>await Y.delete(`/documents/team/${e}/document/${t}`),mn=()=>{const e=oe();return K({mutationFn:({teamId:n,documentId:o})=>un(n,o),onSuccess:()=>{e.invalidateQueries({queryKey:["document"]})}})},fn=I({"&:hover":{backgroundColor:S.colors.key_200},width:"15.8rem"}),pn=I({"&:hover":{backgroundColor:S.colors.blue_100},width:"15.8rem"}),$e=()=>{const e=cn(),t=ae(),{mutate:n}=dn(),{mutate:o}=mn();if(!e)return null;const{teamId:r,itemId:s,itemType:a}=e,l=a==="block"?()=>{r&&s&&n({teamId:r,blockId:s},{onSuccess:()=>{t()}})}:()=>{r&&s&&o({teamId:r,documentId:s},{onSuccess:()=>{t()}})};return!a||!r||!s?null:w(v,{styles:{direction:"column",align:"center",justify:"center",paddingRight:"9.35rem",paddingLeft:"9.35rem"},children:[i(De,{tag:"H5",css:{fontWeight:600},children:dt[a.toUpperCase()]}),i(q,{tag:"body4",css:{marginTop:"1rem",fontWeight:400},children:ut[a.toUpperCase()]}),w(v,{styles:{direction:"row",align:"center",justify:"center",gap:"0.8rem",marginTop:"2.4rem"},children:[i(F,{variant:"secondary",size:"large",onClick:t,css:pn,children:"취소"}),i(F,{variant:"primary",size:"large",onClick:l,css:fn,children:"삭제"})]})]})};$e.__docgenInfo={description:"",methods:[],displayName:"DeleteModal"};const gn=async()=>(await Y.get("/teams/category")).data,hn=(e=!0)=>ve({queryKey:["category"],queryFn:()=>gn(),select:t=>{var o;const n=((o=t==null?void 0:t.data)==null?void 0:o.categories)||[];return e?n:n.filter(r=>r!=="전체")}}),Ue=({isVisible:e})=>{const{isOpen:t,close:n,toggle:o}=wt(),{setFormData:r,nextStep:s}=we(),a=Dt(n),[c,u]=y.useState(""),{data:l}=hn(!1);if(y.useEffect(()=>{const g=E=>{var h;if(!a.current||!(E.target instanceof HTMLElement))return;!a.current.contains(E.target)&&!((h=E.target)!=null&&h.className.includes("select-container"))&&(n==null||n())};return t?window.addEventListener("mousedown",g):window.removeEventListener("mousedown",g),()=>{window.removeEventListener("mousedown",g)}},[t,n,a]),!e)return null;const f=g=>{u(g),r({category:g}),n==null||n()},d=()=>{s()},m=c.trim().length>0;return w(v,{tag:"section",styles:{direction:"column",justify:"center",align:"center"},css:mt,children:[i(re,{step:"category",title:"새로운 워크 스페이스 생성하기",info:"팀 카테고리를 선택해주세요."}),i("div",{css:{width:"32rem",marginTop:"2.4rem"},ref:a,children:i(Pe,{css:{"& ul":{maxHeight:"25rem"}},placeholder:"선택",variant:"outline",isOpen:t,onTrigger:o,onSelect:f,options:l.map(g=>({value:g})),className:"select-container"})}),i(F,{variant:"primary",size:"medium",css:ft(m),disabled:!m,onClick:d,children:"다음"})]})};Ue.__docgenInfo={description:"",methods:[],displayName:"WorkSpaceCategory",props:{isVisible:{required:!0,tsType:{name:"boolean"},description:""}}};const ze=()=>{const{step:e}=we();return w(Q,{children:[i(pt,{isVisible:e==1}),i(Ue,{isVisible:e==2}),i(gt,{isVisible:e==3}),i(ht,{isVisible:e==4})]})};ze.__docgenInfo={description:"",methods:[],displayName:"WorkSpaceFlow"};const ie=()=>{const e=sn(),t=an(),n=ae(),o=()=>{switch(t){case"create-workspace":return i(yt,{children:i(ze,{})});case"create-block":return i(Re,{children:i(Be,{})});case"delete":return i($e,{});default:return null}};return!e||!t?null:i(Qe,{isOpen:e,onClose:n,children:o()})};ie.__docgenInfo={description:"",methods:[],displayName:"ModalContainer"};const An={title:"Shared/DeleteModal",component:ie,parameters:{layout:"centered"},args:{isOpen:!1},argTypes:{children:{control:!1}}},W={render:()=>{const e=ln();return w(Q,{children:[i("button",{onClick:()=>e("delete",{teamId:1,itemId:1,itemType:"block"}),children:"Open Delete Modal"}),i(ie,{})]})}};var he,ye,be;W.parameters={...W.parameters,docs:{...(he=W.parameters)==null?void 0:he.docs,source:{originalSource:`{
  render: () => {
    const openModal = useOpenModal();
    return <>
        <button onClick={() => openModal('delete', {
        teamId: 1,
        itemId: 1,
        itemType: 'block'
      })}>
          Open Delete Modal
        </button>
        <ModalContainer />
      </>;
  }
}`,...(be=(ye=W.parameters)==null?void 0:ye.docs)==null?void 0:be.source}}};const Nn=["Delete"];export{W as Delete,Nn as __namedExportsOrder,An as default};
